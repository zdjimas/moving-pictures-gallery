 <!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KZAK ‚Ä¢ Frasier-Style Free Radio</title>
  <style>
    :root{
      --ink:#e6e9ef; --muted:#9aa4b2; --brand:#89b4fa; --accent:#a6e3a1; --danger:#f38ba8;
      --card:#151a29; --line:#22324d; --shadow:0 18px 50px rgba(0,0,0,.45);
    }
    html,body{height:100%}
    body{
      margin:0; color:var(--ink);
      font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      background:url("Media/RadioMusicListening.jpg") center/cover fixed no-repeat;
      position:relative; overflow-y:overlay;
    }
    body::before{
      content:""; position:fixed; inset:0; pointer-events:none;
      background:linear-gradient(180deg,rgba(10,14,26,.45),rgba(17,26,51,.60) 55%,rgba(12,16,34,.80));
      z-index:0;
    }
    .wrap{max-width:1000px;margin:0 auto;padding:28px 16px 120px; position:relative; z-index:1}

    header{display:flex;align-items:center;gap:14px;justify-content:space-between;margin:2px 0 18px}
    .brand{display:flex;align-items:center;gap:12px}
    .brand .tower{width:28px;height:28px;border:2px solid #6aa2ff;border-radius:50%;position:relative;box-shadow:0 0 16px rgba(85,135,255,.45) inset}
    .brand .tower:after{content:"";position:absolute;left:50%;top:-6px;width:2px;height:16px;background:#6aa2ff;transform:translateX(-50%)}
    h1{font-weight:700;margin:0;font-size:20px;letter-spacing:.2px}
    .righthead{display:flex;align-items:center;gap:10px}
    .badge{font-size:12px;padding:4px 10px;border-radius:999px;border:1px solid #2a3958;background:#0d1222;color:var(--muted)}
    .btn-link{display:inline-flex;align-items:center;gap:8px;text-decoration:none;background:#0f131a;border:1px solid #2a3344;color:var(--ink);padding:10px 14px;border-radius:999px}
    .btn-link:hover{background:#121826}

    .card{background:var(--card);border:1px solid var(--line);border-radius:20px;box-shadow:var(--shadow)}
    .radio{display:grid;grid-template-columns:1fr;gap:16px;padding:18px}
    .now{display:flex;align-items:center;gap:16px;flex-wrap:wrap}
    .cover{width:92px;height:92px;border-radius:14px;background:linear-gradient(135deg,#202a41,#121827);display:flex;align-items:center;justify-content:center}
    .meta{min-width:0;flex:1}
    .title-row{display:flex;align-items:center;gap:10px;min-width:0}
    .title{font-size:18px;font-weight:700;margin:0 0 2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .subtitle{margin:0;color:var(--muted);font-size:12px}
    .onair{color:#1a0a0a;background:#ff2e2e;border:1px solid #6b1212;box-shadow:0 0 16px rgba(255,46,46,.35) inset,0 0 12px rgba(255,46,46,.25);font-weight:800;letter-spacing:.6px;border-radius:999px;padding:4px 10px}
    .onair .dot{display:inline-block;width:8px;height:8px;margin-right:6px;border-radius:50%;background:#ffe9e9;animation:pulse 1.4s infinite}
    @keyframes pulse{0%{opacity:.4}50%{opacity:1}100%{opacity:.4}}

    .controls{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    button{background:#0f131a;color:var(--ink);border:1px solid #2a3344;border-radius:999px;padding:10px 14px;cursor:pointer}
    button:disabled{opacity:.5;cursor:not-allowed}
    .primary{background:var(--brand);border-color:transparent;color:#061326;font-weight:700}
    .danger{background:#1a1012;border-color:#3a1a22;color:#ffdfe6}
    .toggle.active{background:var(--accent);border-color:transparent;color:#062211}
    .muted{background:#101010;border-color:#444}
    .vol{display:flex;align-items:center;gap:8px;margin-left:auto}
    .vol input{accent-color:#9dc2ff}

    /* Playlist scroller */
    .list{
      padding:10px;
      height:clamp(220px, 40vh, 420px);
      max-height:420px;
      overflow:auto;
      border-top:1px solid var(--line);
      border-radius:12px;
      overscroll-behavior:contain;
      -webkit-overflow-scrolling:touch;
      background:linear-gradient(180deg, rgba(0,0,0,.08), rgba(0,0,0,.12));
    }
    .track{display:flex;align-items:center;gap:10px;padding:10px;border-radius:12px;border:1px solid transparent}
    .track:hover{background:#0f1524;border-color:#273553}
    .tidx{width:28px;height:28px;display:grid;place-items:center;background:#0c1016;border-radius:8px;color:#88a;font-size:12px}
    .tmeta{flex:1;min-width:0}
    .tmeta .ttitle{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .track.active{outline:2px solid #2d6cdf}
    footer{margin-top:10px;color:var(--muted);font-size:12px}

    .toast{position:fixed;left:50%;bottom:16px;transform:translateX(-50%);background:#0f131a;border:1px solid #2a3344;color:var(--ink);padding:10px 14px;border-radius:999px;box-shadow:var(--shadow);opacity:0;pointer-events:none;transition:opacity .2s ease}
    .toast.show{opacity:1}

    /* Creators */
    .creators{margin-top:18px}
    .creators h2{margin:18px 4px 10px;font-size:18px;letter-spacing:.2px}
    .cards{display:grid;grid-template-columns:1fr;gap:16px}
    @media (min-width:750px){ .cards{grid-template-columns:1fr 1fr} }
    .card-person{background:var(--card);border:1px solid var(--line);border-radius:16px;box-shadow:var(--shadow);display:grid;grid-template-columns:120px 1fr;gap:14px;padding:14px}
    @media (max-width:480px){ .card-person{grid-template-columns:90px 1fr} }
    .portrait{width:100%;aspect-ratio:1/1;border-radius:12px;object-fit:cover;background:#0c1020}
    .person h3{margin:0 0 4px;font-size:16px}
    .role{margin:0 0 8px;color:var(--muted);font-size:12px}
    .bio{margin:0;color:#d6dae3;font-size:14px;line-height:1.45}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="tower" aria-hidden="true"></div>
        <h1>KZAK ‚Ä¢ Frasier-Style Free Radio without the talking</h1>
      </div>
      <div class="righthead">
        <div class="badge" id="status">idle</div>
        <a href="../index.html" class="btn-link" aria-label="Return to Museum Lobby">üèõ Return to Museum Lobby</a>
      </div>
    </header>

    <!-- Player -->
    <section class="card radio" aria-label="Local Radio Player">
      <div class="now">
        <div class="cover" aria-hidden="true">
          <svg viewBox="0 0 80 80" width="56" height="56" fill="none">
            <rect x="10" y="34" width="60" height="26" rx="6" stroke="#7aa2f7"/>
            <circle cx="24" cy="47" r="6" stroke="#7aa2f7"/>
            <rect x="38" y="43" width="22" height="8" rx="3" stroke="#7aa2f7"/>
            <path d="M50 34V18" stroke="#7aa2f7"/><circle cx="50" cy="16" r="2" fill="#7aa2f7"/>
          </svg>
        </div>

        <div class="meta">
          <div class="title-row">
            <p class="title" id="nowTitle">Nothing playing</p>
            <button id="btnShare" title="Share: copies a link and opens your email/chat" aria-label="Share current track">‚ÜóÔ∏é Share</button>
          </div>
          <p class="subtitle" id="nowSub">Upload MP3s to <code>Media/</code> and press Start.</p>
        </div>

        <span class="onair" id="onAir" style="display:none"><span class="dot"></span>ON AIR</span>
      </div>

      <div class="controls" role="group" aria-label="Playback controls">
        <button id="btnPrev" aria-label="Previous" disabled>‚èÆÔ∏é</button>
        <button id="btnPlay" class="primary" aria-label="Play">‚ñ∂Ô∏é Start Station</button>
        <button id="btnNext" aria-label="Next" disabled>‚è≠Ô∏é</button>
        <button id="btnStop" class="danger" aria-label="Stop/Pause" disabled>‚ñ† Stop/Pause</button>
        <button id="btnShuffle" class="toggle" aria-pressed="false">Shuffle</button>
        <label style="display:flex;align-items:center;gap:6px"><input id="loopAll" type="checkbox" checked /> <span>Loop</span></label>
        <button id="btnMute" class="muted" aria-pressed="false" title="Mute (M)">üîá Mute</button>
        <span class="vol"><span>Vol</span> <input id="vol" type="range" min="0" max="1" step="0.01" value="0.8" /></span>
      </div>

      <div class="list" id="trackList" role="listbox" aria-label="Playlist"></div>

      <footer><strong>Copyright 2025:</strong> zdjimas and cjmurphy creators and authors</footer>

      <audio id="audio" preload="metadata" playsinline></audio>
    </section>

    <!-- Creators -->
    <section class="creators" aria-label="Creators">
      <h2>Creators</h2>
      <div class="cards">
        <article class="card-person">
          <img class="portrait" src="Media/ZachArt.jpeg" alt="Portrait of zdjimas" loading="lazy" />
          <div class="person">
            <h3>zdjimas</h3>
            <p class="role">Composer ‚Ä¢ Producer ‚Ä¢ Multi-instrumentalist</p>
            <p class="bio">Co-creator of KZAK‚Äôs instrumental stream. Focused on textured guitar work, cinematic harmonies, and ‚Äúmoving-picture‚Äù sound design across the museum rooms.</p>
          </div>
        </article>

        <article class="card-person">
          <img class="portrait" src="Media/CJMURPHY.png" alt="Portrait of cjmurphy" loading="lazy" />
          <div class="person">
            <h3>cjmurphy</h3>
            <p class="role">Arranger ‚Ä¢ Sound Engineer ‚Ä¢ Visual collaborator</p>
            <p class="bio">Builds the mixes and spatial layers behind the station. Works across abstract video rooms and the radio to keep the vibe cohesive and immersive.</p>
          </div>
        </article>
      </div>
    </section>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script>
    /* ===== Helpers ===== */
    function byId(id){ return document.getElementById(id); }
    const els = {
      audio: byId('audio'),
      status: byId('status'),
      onAir: byId('onAir'),
      nowTitle: byId('nowTitle'),
      nowSub: byId('nowSub'),
      list: byId('trackList'),
      btnPrev: byId('btnPrev'),
      btnPlay: byId('btnPlay'),
      btnNext: byId('btnNext'),
      btnStop: byId('btnStop'),
      btnShuffle: byId('btnShuffle'),
      loopAll: byId('loopAll'),
      btnMute: byId('btnMute'),
      vol: byId('vol'),
      btnShare: byId('btnShare'),
      toast: byId('toast')
    };

    function pathToUrl(rel){
      const segs = rel.split('/').map(s=>encodeURIComponent(s));
      return new URL(segs.join('/'), new URL('.', location.href)).href;
    }
    function showToast(msg, ms=1600){
      els.toast.textContent = msg; els.toast.classList.add('show');
      setTimeout(()=>els.toast.classList.remove('show'), ms);
    }
    function escapeHtml(s){
      return (s||'').replace(/[&<>"']/g, m=>({
        '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'
      })[m]);
    }

    /* ===== Playlist ===== */
const PLAYLIST = [
  { title: 'A Demo in Time of Dying', file: 'Media/A Demo in Time of Dying.mp3' },
  { title: 'A Demo of Poor Tom', file: 'Media/A Demo of Poor Tom.mp3' },
  { title: 'A Madman Plays Seville', file: 'Media/A Madman Plays Seville.mp3' },
  { title: 'A Spec of a Blue Dot', file: 'Media/A Spec of a Blue Dot.mp3' },
  { title: 'All that glitters is gold Acoustic Blend', file: 'Media/All that glitters is gold Acoustic Blend.mp3' },
  { title: 'All that glitters is gold remains', file: 'Media/All that glitters is gold remains.mp3' },
  { title: 'All that glitters is gold', file: 'Media/All that glitters is gold.mp3' },
  { title: 'Ballad of a Bleak Future', file: 'Media/Ballad of a Bleak Future.mp3' },
  { title: 'Bend the clock - 70s Barn Jam Edition', file: 'Media/Bend the clock - 70s Barn Jam Edition.mp3' },
  { title: 'Beyond My Understanding', file: 'Media/Beyond My Understanding.mp3' },
  { title: "Bolotone's Intro", file: "Media/Bolotone's Intro.mp3" },
  { title: 'Cover Of Wings For Marie (Part 1) v1', file: 'Media/Cover Of Wings For Marie (Part 1) v1.mp3' },
  { title: 'Covering my Eyes', file: 'Media/Covering my Eyes.mp3' },
  { title: 'Fear Inoculum (Cover) v1', file: 'Media/Fear Inoculum (Cover) v1.mp3' },
  { title: 'Friends in FrontierLand', file: 'Media/Friends in FrontierLand.mp3' },
  { title: 'Leaving You', file: 'Media/Leaving You.mp3' },
  { title: 'More Guitars at Luna Park', file: 'Media/More Guitars at Luna Park.mp3' },
  { title: 'Rain Song Replayed', file: 'Media/Rain Song Replayed.mp3' },
  { title: 'The Canelo-Crawford Event Round 1', file: 'Media/The Canelo-Crawford Event Round 1.mp3' },
  { title: 'The Canelo-Crawford Event', file: 'Media/The Canelo-Crawford Event.mp3' },
  { title: 'The Greatest Debate Ever', file: 'Media/The Greatest Debate Ever.mp3' },
  { title: 'The Madman Plays in Cancun', file: 'Media/The Madman Plays in Cancun.mp3' },
  { title: 'The Spirit Carries On (Live Rehearsal 2) (Remix)', file: 'Media/The Spirit Carries On (Live Rehearsal 2) (Remix).mp3' },
  { title: 'The X Aspect shortened', file: 'Media/The X Aspect shortened.mp3' },
];

    let current = -1, isPlaying = false;
    const K = { vol:'radio.vol', muted:'radio.muted', shuffle:'radio.shuffle', loop:'radio.loop' };

    els.vol.value = localStorage.getItem(K.vol) || '0.8';
    els.audio.volume = parseFloat(els.vol.value);
    els.audio.muted = JSON.parse(localStorage.getItem(K.muted)||'false'); setMuteUi(els.audio.muted);
    let isShuffle = JSON.parse(localStorage.getItem(K.shuffle)||'false');
    if(isShuffle){ els.btnShuffle.classList.add('active'); els.btnShuffle.setAttribute('aria-pressed','true'); }
    const loopSaved = localStorage.getItem(K.loop); if(loopSaved!==null) els.loopAll.checked = loopSaved==='true';

    function renderList(){
      els.list.innerHTML = '';
      PLAYLIST.forEach((t,i)=>{
        const row = document.createElement('div');
        row.className='track'; row.role='option'; row.tabIndex=0;
        row.innerHTML = `<div class="tidx">${i+1}</div>
          <div class="tmeta"><div class="ttitle">${escapeHtml(t.title)}</div>
          <div class="subtitle">${escapeHtml(t.file)}</div></div>
          <button class="btn" title="Play">Play</button>`;
        row.querySelector('button').addEventListener('click', ()=> startAt(i));
        row.addEventListener('dblclick', ()=> startAt(i));
        row.addEventListener('keydown', e=>{ if(e.key==='Enter') startAt(i); });
        els.list.appendChild(row);
      });
      enableTransport(!!PLAYLIST.length); highlight();
    }

    function enableTransport(on){
      els.btnPlay.disabled=!on; els.btnNext.disabled=!on; els.btnPrev.disabled=!on; els.btnStop.disabled=!on;
    }
    function highlight(){
      [...els.list.children].forEach((c,idx)=> c.classList.toggle('active', idx===current));
    }
    function notify(msg){ els.status.textContent = msg; }

    async function startAt(i){
      if(!PLAYLIST.length) return;
      current = i % PLAYLIST.length;
      const track = PLAYLIST[current];
      els.nowTitle.textContent = track.title; els.nowSub.textContent = 'Loading‚Ä¶';
      notify(`track ${current+1} / ${PLAYLIST.length}`); highlight();
      try{
        await attach(track.file);
        await els.audio.play();
        isPlaying = true; els.btnPlay.textContent='‚è∏Ô∏é Pause'; els.btnPlay.ariaLabel='Pause';
        els.onAir.style.display=''; els.nowSub.textContent='Playing';
      }catch(err){ notify('Could not play this file. Skipping‚Ä¶'); next(); }
    }

    function attach(src){
      return new Promise((resolve,reject)=>{
        els.audio.pause(); els.audio.removeAttribute('src'); els.audio.load();
        const onMeta=()=>{ els.audio.removeEventListener('loadedmetadata',onMeta); els.audio.removeEventListener('error',onErr); resolve(); };
        const onErr =()=>{ els.audio.removeEventListener('loadedmetadata',onMeta); els.audio.removeEventListener('error',onErr); reject(new Error('load error')); };
        els.audio.addEventListener('loadedmetadata', onMeta, {once:true});
        els.audio.addEventListener('error', onErr, {once:true});
        els.audio.src = pathToUrl(src); els.audio.load();
      });
    }

    function next(){
      if(!PLAYLIST.length) return;
      if(isShuffle){
        let n; do{ n=Math.floor(Math.random()*PLAYLIST.length); } while(PLAYLIST.length>1 && n===current);
        startAt(n);
      } else {
        const n=current+1;
        if(n<PLAYLIST.length) startAt(n);
        else if(els.loopAll.checked) startAt(0);
        else stopAll();
      }
    }
    function prev(){
      if(!PLAYLIST.length) return;
      if(isShuffle){ startAt(Math.floor(Math.random()*PLAYLIST.length)); }
      else { startAt((current-1+PLAYLIST.length)%PLAYLIST.length); }
    }
    function stopAll(){
      els.audio.pause(); isPlaying=false; els.btnPlay.textContent='‚ñ∂Ô∏é Start Station';
      els.btnPlay.ariaLabel='Play'; els.onAir.style.display='none'; notify('stopped');
    }

    async function shareCurrent(){
      const idx = current >= 0 ? current : 0;
      const track = PLAYLIST[idx];
      const url = pathToUrl(track.file);
      const title = `üéß ${track.title} ‚Äî KZAK Radio`;
      const text = `Listening on KZAK ‚Ä¢ Frasier-Style Free Radio:\n${track.title}\n\n${url}`;
      if (navigator.share){
        try{ await navigator.share({ title, text, url }); showToast('Shared!'); return; }catch(e){}
      }
      try{ await navigator.clipboard.writeText(url); showToast('Link copied'); }catch(e){}
      window.open(`mailto:?subject=${encodeURIComponent('Check this track')}&body=${encodeURIComponent(text)}`, '_blank', 'noopener,noreferrer');
    }

    // Events
    els.audio.addEventListener('ended', next);
    els.audio.addEventListener('error', ()=>{ notify('Playback error. Skipping‚Ä¶'); next(); });
    els.audio.addEventListener('waiting', ()=> els.nowSub.textContent='Buffering‚Ä¶');
    els.audio.addEventListener('playing', ()=> els.nowSub.textContent='Playing');
    els.audio.addEventListener('play',   ()=> els.onAir.style.display='');
    els.audio.addEventListener('pause',  ()=> els.onAir.style.display='none');
    els.audio.addEventListener('ended',  ()=> els.onAir.style.display='none');

    els.btnPlay.addEventListener('click', ()=>{ if(isPlaying){ stopAll(); } else { if(current<0) startAt(0); else els.audio.play().catch(()=>startAt(current)); } });
    els.btnNext.addEventListener('click', next);
    els.btnPrev.addEventListener('click', prev);
    els.btnStop .addEventListener('click', stopAll);
    els.btnShuffle.addEventListener('click', ()=>{
      isShuffle=!isShuffle; els.btnShuffle.classList.toggle('active', isShuffle);
      els.btnShuffle.setAttribute('aria-pressed','true'); localStorage.setItem(K.shuffle, JSON.stringify(isShuffle));
      notify(isShuffle?'Shuffle: ON':'Shuffle: OFF');
    });
    els.loopAll.addEventListener('change', ()=> localStorage.setItem(K.loop, els.loopAll.checked?'true':'false'));
    els.btnShare.addEventListener('click', shareCurrent);

    function setMuteUi(m){
      if(m){ els.btnMute.textContent='üîä Sound On'; els.btnMute.classList.remove('muted'); els.btnMute.setAttribute('aria-pressed','true'); }
      else  { els.btnMute.textContent='üîá Mute'; els.btnMute.classList.add('muted'); els.btnMute.setAttribute('aria-pressed','false'); }
    }
    els.btnMute.addEventListener('click', ()=>{
      const m=!els.audio.muted; els.audio.muted=m; localStorage.setItem(K.muted, JSON.stringify(m)); setMuteUi(m);
    });
    els.vol.addEventListener('input', ()=>{
      const v=parseFloat(els.vol.value||'0.8'); els.audio.volume=v; localStorage.setItem(K.vol,String(v));
    });

    window.addEventListener('keydown', (e)=>{
      if(['INPUT','TEXTAREA'].includes(document.activeElement.tagName)) return;
      if(e.code==='Space'){ e.preventDefault(); els.btnPlay.click(); }
      if(e.key==='n'||e.key==='N'){ e.preventDefault(); els.btnNext.click(); }
      if(e.key==='p'||e.key==='P'){ e.preventDefault(); els.btnPrev.click(); }
      if(e.key==='s'||e.key==='S'){ e.preventDefault(); els.btnShuffle.click(); }
      if(e.key==='m'||e.key==='M'){ e.preventDefault(); els.btnMute.click(); }
      if(e.key==='u'||e.key==='U'){ e.preventDefault(); shareCurrent(); }
    });

    renderList();
  </script>
</body>
</html>

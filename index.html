<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Moving Pictures ‚Äî Museum Themes</title>
<style>
  /* ---------- Design tokens ---------- */
  :root {
    --bg: #0b0c10;            /* fallback wall color */
    --wall-overlay: rgba(10,12,16,.70);
    --text: #e8eaed;
    --muted: #9aa0a6;
    --accent: #7cc6ff;
    --radius: 18px;
    --shadow: 0 10px 30px rgba(0,0,0,.35);

    /* Frame colors default (overridden per theme) */
    --frame-face: #c9b168;    /* gold-ish */
    --frame-edge: #8a7442;
    --frame-inner: #f4e8c7;
    --plinth: rgba(0,0,0,.25);
  }

  /* ---------- Page & ‚Äúhall‚Äù backdrop ---------- */
  html, body { height: 100%; }
  body {
    margin: 0;
    color: var(--text);
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    background: var(--bg);
    /* the hall image is applied on .hall via classes */
  }
  .hall {
    min-height: 100%;
    background-attachment: fixed;
    background-position: center center;
    background-size: cover;
    position: relative;
  }
  .hall::before {
    content: "";
    position: absolute; inset: 0;
    background: var(--wall-overlay); /* darken for legibility */
    pointer-events: none;
  }
  .wrap { position: relative; z-index: 1; max-width: 1200px; margin: 0 auto; padding: 28px 18px 80px; }
  h1 { margin: 0 0 8px; font-size: clamp(22px, 2.6vw, 34px); }
  .note { color: var(--muted); font-size: 14px; margin: 6px 0 16px; }

  /* ---------- Controls ---------- */
  .controls { display: flex; flex-wrap: wrap; gap: 10px; margin: 8px 0 18px; align-items: center; }
  .btn, .select {
    appearance: none; border: 1px solid #2a2f3a; background: #171a21; color: var(--text);
    padding: 10px 14px; border-radius: 10px; cursor: pointer; box-shadow: var(--shadow);
  }
  .btn[aria-pressed="true"] { border-color: #3a84ff; background: #1b2436; }
  .select { cursor: default; }
  .label { font-size: 13px; color: var(--muted); margin-right: 6px; }

  /* ---------- Grid (2√ó2, responsive) ---------- */
  .gallery {
    display: grid;
    grid-template-columns: repeat(2, minmax(280px, 1fr));
    gap: 26px;
  }
  @media (max-width: 760px) { .gallery { grid-template-columns: 1fr; } }

  /* ---------- Frame + tile ---------- */
  .frame-wrap {
    /* plinth/shadow under the frame */
    filter: drop-shadow(0 18px 24px var(--plinth));
  }
  .frame {
    position: relative;
    /* Ornate-ish ‚Äústepped‚Äù frame via layered gradients */
    background:
      linear-gradient(#0000, #0000) padding-box,
      linear-gradient(135deg, var(--frame-edge), var(--frame-face)) border-box;
    border: 12px solid transparent;              /* outer bevel */
    border-radius: 12px;

    /* Inner slip (thin line) */
    box-shadow:
      inset 0 0 0 2px var(--frame-inner),
      inset 0 0 0 14px rgba(0,0,0,.35);

    overflow: hidden;
  }

  /* The actual poster/preview area */
  .tile {
    position: relative;
    background: #0f1116;
    aspect-ratio: 16 / 9;               /* consistent ‚Äúcanvas‚Äù */
    border-radius: 6px;
    overflow: hidden;
  }
  .thumb, .clip { display: block; width: 100%; height: 100%; object-fit: cover; }
  .clip { position: absolute; inset: 0; opacity: 0; transition: opacity .25s ease-out; }
  .tile:hover .clip, .tile:focus-within .clip { opacity: 1; }

  /* Caption plaque */
  .overlay {
    position: absolute; inset: auto 0 0 0;
    background: linear-gradient(180deg, transparent, rgba(0,0,0,.75));
    padding: 12px 14px; display: flex; align-items: center; justify-content: space-between; gap: 10px;
  }
  .title { font-weight: 600; font-size: 14px; }
  .badge { font-size: 12px; color: #c5e4ff; background: rgba(124,198,255,.08);
           border: 1px solid rgba(124,198,255,.3); padding: 4px 8px; border-radius: 999px; }

  /* ---------- Lightbox ---------- */
  .lightbox { position: fixed; inset: 0; background: rgba(8,10,14,.72); backdrop-filter: blur(6px);
              display: none; align-items: center; justify-content: center; padding: 24px; z-index: 50; }
  .lightbox.open { display: flex; }
  .lightbox-card { width: min(1100px, 92vw); background: #0f1218; border: 1px solid #222936;
                   border-radius: 20px; overflow: hidden; box-shadow: var(--shadow); }
  .lightbox-head { display: flex; justify-content: space-between; align-items: center;
                   padding: 12px 16px; border-bottom: 1px solid #1b222e; }
  .lightbox-title { font-weight: 600; }
  .x { border: 0; background: transparent; color: #9aa0a6; font-size: 22px; cursor: pointer; }
  .player { position: relative; aspect-ratio: 16 / 9; background: #000; }
  .player video { position: absolute; inset: 0; width: 100%; height: 100%; }

  /* ---------- Theme presets (background + frame colors) ---------- */
  /* Louvre: deep blue wall, parquet floor vibe, ornate gold frames */
  .theme-louvre { --bg: #0d111b; --wall-overlay: rgba(5,7,11,.66);
                  --frame-face: #d6bf77; --frame-edge: #8a7442; --frame-inner: #f3ebd2; }
  .theme-louvre .hall { background-image: url("./bg-louvre.jpg"); }

  /* Met: neutral stone + soft light, black museum frames */
  .theme-met    { --bg: #121418; --wall-overlay: rgba(8,10,14,.60);
                  --frame-face: #0d0f13; --frame-edge: #272b35; --frame-inner: #bfc9d6; }
  .theme-met .hall { background-image: url("./bg-met.jpg"); }

  /* LA modern: bright white cube, minimal white frames */
  .theme-la     { --bg: #121212; --wall-overlay: rgba(10,10,10,.50);
                  --frame-face: #f4f6f8; --frame-edge: #cfd6dd; --frame-inner: #fefefe; }
  .theme-la .hall { background-image: url("./bg-la-modern.jpg"); }
</style>
</head>
<body class="theme-louvre">
  <div class="hall">
    <div class="wrap">
      <h1>Moving Pictures ‚Äî Virtual Museum</h1>
      <div class="note">Hover to preview. Click to open with sound. Use the buttons to enable sound-on-hover and to switch venues + frames.</div>

      <div class="controls">
        <button id="soundToggle" class="btn" aria-pressed="false">üîä Enable Sound Previews</button>

        <span class="label">Venue & Frames:</span>
        <select id="themeSelect" class="select">
          <option value="theme-louvre">Louvre (Ornate Gold)</option>
          <option value="theme-met">Met (Classic Black)</option>
          <option value="theme-la">LA Modern (Minimal White)</option>
        </select>

        <button class="btn" onclick="location.reload()">‚Üª Refresh</button>
      </div>

      <!-- 2√ó2 framed gallery -->
      <div class="gallery">
        <!-- Tile 1 -->
        <div class="frame-wrap">
          <div class="frame">
            <article class="tile" tabindex="0"
                     data-title="Xavier's Perspectives"
                     data-video="./xaviers-perspectives.mp4">
              <img class="thumb" src="./xaviers-perspectives-poster.png" alt="Poster: Xavier's Perspectives" />
              <video class="clip" preload="none" playsinline muted loop></video>
              <div class="overlay">
                <div class="title">Xavier's Perspectives</div>
                <div class="badge">Hover to preview</div>
              </div>
            </article>
          </div>
        </div>

        <!-- Tile 2 -->
        <div class="frame-wrap">
          <div class="frame">
            <article class="tile" tabindex="0"
                     data-title="Reflections from a Jazz Club"
                     data-video="./Reflections from a Jazz Club.mp4">
              <img class="thumb" src="./Jazz.png" alt="Poster: Reflections from a Jazz Club" />
              <video class="clip" preload="none" playsinline muted loop></video>
              <div class="overlay">
                <div class="title">Reflections from a Jazz Club</div>
                <div class="badge">Hover to preview</div>
              </div>
            </article>
          </div>
        </div>

        <!-- Tile 3 -->
        <div class="frame-wrap">
          <div class="frame">
            <article class="tile" tabindex="0"
                     data-title="Vacancy ‚Äî an AI cover of Dream Theater"
                     data-video="./Vacancy - an AI cover of Dream Theater.mp4">
              <img class="thumb" src="./vacany.png" alt="Poster: Vacancy ‚Äî an AI cover of Dream Theater" />
              <video class="clip" preload="none" playsinline muted loop></video>
              <div class="overlay">
                <div class="title">Vacancy ‚Äî AI cover (Dream Theater)</div>
                <div class="badge">Hover to preview</div>
              </div>
            </article>
          </div>
        </div>

        <!-- Tile 4 -->
        <div class="frame-wrap">
          <div class="frame">
            <article class="tile" tabindex="0"
                     data-title="Wings for Marie"
                     data-video="./Wings For Marie.mp4">
              <img class="thumb" src="./Wings.png" alt="Poster: Wings for Marie" />
              <video class="clip" preload="none" playsinline muted loop></video>
              <div class="overlay">
                <div class="title">Wings for Marie</div>
                <div class="badge">Hover to preview</div>
              </div>
            </article>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-label="Video player">
    <div class="lightbox-card">
      <div class="lightbox-head">
        <div class="lightbox-title" id="lbTitle">Title</div>
        <button class="x" id="lbClose" aria-label="Close">‚úï</button>
      </div>
      <div class="player">
        <video id="lbVideo" controls playsinline></video>
      </div>
    </div>
  </div>

<script>
  /* ===== Sound-on-hover (after opt-in) ===== */
  let soundEnabled = false;
  let audioCtx = null;
  const soundToggle = document.getElementById('soundToggle');
  soundToggle.addEventListener('click', async () => {
    try {
      audioCtx = audioCtx || new (window.AudioContext || window.webkitAudioContext)();
      if (audioCtx.state === 'suspended') await audioCtx.resume();
    } catch(e) { /* ignore */ }
    soundEnabled = !soundEnabled;
    soundToggle.setAttribute('aria-pressed', String(soundEnabled));
    soundToggle.textContent = soundEnabled ? 'üîá Disable Sound Previews' : 'üîä Enable Sound Previews';
  });

  /* ===== Theme switcher ===== */
  const themeSelect = document.getElementById('themeSelect');
  themeSelect.addEventListener('change', () => {
    document.body.classList.remove('theme-louvre', 'theme-met', 'theme-la');
    document.body.classList.add(themeSelect.value);
  });

  /* ===== Hover/touch preview ===== */
  const tiles = document.querySelectorAll('.tile');
  function startPreview(tile) {
    const v = tile.querySelector('video.clip');
    if (!v.src) v.src = tile.dataset.video;
    v.muted = !soundEnabled;  // unmute after user opt-in
    v.loop = true;
    v.play().catch(()=>{});
  }
  function stopPreview(tile) {
    const v = tile.querySelector('video.clip');
    if (v) v.pause();
  }
  tiles.forEach(tile => {
    tile.addEventListener('mouseenter', () => startPreview(tile));
    tile.addEventListener('focus', () => startPreview(tile));
    tile.addEventListener('mouseleave', () => stopPreview(tile));
    tile.addEventListener('blur', () => stopPreview(tile));

    // iPad "hover"
    tile.addEventListener('touchstart', () => startPreview(tile), {passive:true});
    tile.addEventListener('touchend', () => stopPreview(tile), {passive:true});
  });

  /* ===== Lightbox with sound ===== */
  const lb = document.getElementById('lightbox');
  const lbVideo = document.getElementById('lbVideo');
  const lbTitle = document.getElementById('lbTitle');
  const lbClose = document.getElementById('lbClose');
  function openLightbox(title, src, poster) {
    lbTitle.textContent = title || 'Untitled';
    lbVideo.src = src; lbVideo.poster = poster || '';
    lb.classList.add('open');
    lbVideo.muted = false;
  }
  function closeLightbox() { lbVideo.pause(); lbVideo.src=''; lb.classList.remove('open'); }
  lbClose.addEventListener('click', closeLightbox);
  lb.addEventListener('click', (e)=>{ if(e.target===lb) closeLightbox(); });
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && lb.classList.contains('open')) closeLightbox(); });

  tiles.forEach(tile => {
    tile.addEventListener('click', () =>
      openLightbox(tile.dataset.title, tile.dataset.video, tile.querySelector('img.thumb')?.getAttribute('src')));
    tile.addEventListener('keyup', (e) => {
      if (e.key==='Enter' || e.key===' ')
        openLightbox(tile.dataset.title, tile.dataset.video, tile.querySelector('img.thumb')?.getAttribute('src'));
    });
  });
</script>
</body>
</html>

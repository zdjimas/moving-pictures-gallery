 <!doctype html>
<html lang="en" data-theme="theme-default">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Moving Pictures ‚Äî Museum Lobby</title>
  <style>
    :root{
      --ink:#e6e9ef; --muted:#9aa4b2; --brand:#89b4fa; --accent:#a6e3a1; --danger:#f38ba8;
      --bg:#0a0e1a; --tile:#0f131a; --line:#22324d; --shadow:0 18px 50px rgba(0,0,0,.45);
    }
    html,body{height:100%}
    body{margin:0;color:var(--ink);font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:#0a0e1a}
    .wrap{max-width:1200px;margin:0 auto;padding:28px 16px 80px}

    header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:18px}
    h1{margin:0;font-size:20px}
    .theme{display:flex;gap:8px;align-items:center}
    .theme button{border:1px solid var(--line);border-radius:999px;background:#0f131a;color:var(--ink);padding:8px 12px;cursor:pointer}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}

    .tile{position:relative;background:var(--tile);border:1px solid var(--line);border-radius:16px;overflow:hidden;box-shadow:var(--shadow)}
    .poster{display:block;width:100%;aspect-ratio:16/9;object-fit:cover}
    .tile .hovervid{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;opacity:0;transition:opacity .25s}
    .tile:hover .hovervid[data-sound="on"]{opacity:.9}
    .tile .meta{padding:12px}
    .tile h3{margin:0 0 4px;font-size:16px}
    .desc{margin:0;color:var(--muted);font-size:12px}
    .plaque{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-top:10px}
    .cta, .sound{border:1px solid var(--line);border-radius:999px;background:#0f131a;color:var(--ink);padding:8px 12px;cursor:pointer}
    .sound[data-sound="on"]{background:var(--accent);color:#062211;border-color:transparent}

    /* Pre-roll overlay */
    .room-intro-overlay{
      position:fixed; inset:0; z-index:9999; display:grid; place-items:center;
      background:rgba(0,0,0,.65);
    }
    .intro-frame{ width:min(960px, 92vw); aspect-ratio:16/9; position:relative; }
    .intro-video{ width:100%; height:100%; object-fit:cover; border-radius:14px; box-shadow:var(--shadow); background:#000; }
    .intro-ui{
      position:absolute; left:0; right:0; bottom:10px; display:flex; gap:12px; align-items:center;
      justify-content:space-between; padding:10px 12px;
    }
    .intro-status{
      margin:0; padding:.35rem .75rem; font-size:14px; color:#e6e9ef; background:rgba(0,0,0,.45);
      border:1px solid rgba(255,255,255,.18); border-radius:999px;
    }
    .intro-skip{
      background:#0f131a; color:#e6e9ef; border:1px solid #2a3344; border-radius:999px;
      padding:8px 14px; cursor:pointer;
    }
    .intro-skip:hover{ background:#121826; }
    .intro-skip:focus{ outline:2px solid #89b4fa; outline-offset:2px; }

    footer{margin-top:24px;color:var(--muted);font-size:12px;text-align:center}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Moving Pictures ‚Äî Museum Lobby</h1>
      <div class="theme" aria-label="Choose venue theme">
        <span style="font-size:12px;color:var(--muted)">Theme:</span>
        <button data-theme="theme-default">Default</button>
        <button data-theme="louvre">Louvre</button>
        <button data-theme="met">Met</button>
        <button data-theme="la">LA</button>
      </div>
    </header>

    <section class="grid" aria-label="Exhibits">

      <!-- 1) KZAK Radio Room (static tile; plaque CTA triggers pre-roll then nav) -->
      <article class="tile" aria-labelledby="kzak-title">
        <img class="poster" src="./RadioMusicListening.jpg" alt="KZAK Radio Room poster"/>
        <div class="meta">
          <h3 id="kzak-title">KZAK ‚Ä¢ Frasier-Style Free Radio</h3>
          <p class="desc">A curated stream of instrumentals & remixes ‚Äî no chatter, just music.</p>
          <div class="plaque">
            <button class="cta enter-room"
                    data-intro="room-radio-listen/radio-room-entry.mp4"
                    data-target="room-radio-listen/index.html"
                    aria-haspopup="dialog">üèõ Enter this Room</button>
          </div>
        </div>
      </article>

      <!-- 2) Wings for Marie (local MP4 hover preview, sound toggle, plaque CTA) -->
      <article class="tile" aria-labelledby="wings-title">
        <img class="poster" src="room-narrative-memory/Media/wings-poster.jpg" alt="" />
        <video class="hovervid" muted preload="metadata" playsinline
               src="room-narrative-memory/Media/NarrativeMemoryRoom.mp4" data-sound="off"></video>
        <div class="meta">
          <h3 id="wings-title">Wings for Marie ‚Äî Narrative & Memory</h3>
          <p class="desc">Hover to preview. Toggle sound, then enter the room.</p>
          <div class="plaque">
            <button class="sound" data-target=".hovervid" data-sound="off" aria-pressed="false">üîà Hover Sound: Off</button>
            <button class="cta enter-room"
                    data-intro="room-narrative-memory/Media/NarrativeMemoryRoom.mp4"
                    data-target="room-narrative-memory/index.html"
                    aria-haspopup="dialog">üèõ Enter this Room</button>
          </div>
        </div>
      </article>

      <!-- 3) The Grudge on Dune / Abstracts (TikTok tile OR local intro) -->
      <article class="tile" aria-labelledby="abstracts-title">
        <img class="poster" src="room-abstract/media/abstracts-poster.jpg" alt="Abstracts poster"/>
        <div class="meta">
          <h3 id="abstracts-title">The Grudge on Dune ‚Äî Abstracts</h3>
          <p class="desc">Enter the Abstracts room. A moody gateway piece.</p>
          <div class="plaque">
            <button class="cta enter-room"
                    data-intro="room-abstract/media/GhoulsDoor.mp4"
                    data-target="room-abstract/index.html"
                    aria-haspopup="dialog">üèõ Enter this Room</button>
          </div>
        </div>
      </article>

      <!-- 4) Jazz / Vacancy / Xavier (local MP4 hover previews with sound toggles) -->
      <article class="tile" aria-labelledby="jazz-title">
        <img class="poster" src="showcase-jazz/poster.jpg" alt="" />
        <video class="hovervid" muted preload="metadata" playsinline
               src="showcase-jazz/preview.mp4" data-sound="off"></video>
        <div class="meta">
          <h3 id="jazz-title">Jazz ‚Äî Late Night Takes</h3>
          <p class="desc">Hover to preview. Toggle sound for audio.</p>
          <div class="plaque">
            <button class="sound" data-target=".hovervid" data-sound="off" aria-pressed="false">üîà Hover Sound: Off</button>
            <button class="cta" aria-label="Open Jazz showcase lightbox" data-lightbox="showcase-jazz/preview.mp4">‚ñ∂Ô∏é Open Preview</button>
          </div>
        </div>
      </article>

      <article class="tile" aria-labelledby="vacancy-title">
        <img class="poster" src="showcase-vacancy/poster.jpg" alt="" />
        <video class="hovervid" muted preload="metadata" playsinline
               src="showcase-vacancy/preview.mp4" data-sound="off"></video>
        <div class="meta">
          <h3 id="vacancy-title">Vacancy ‚Äî Neon Stories</h3>
          <p class="desc">Hover to preview. Toggle sound for audio.</p>
          <div class="plaque">
            <button class="sound" data-target=".hovervid" data-sound="off" aria-pressed="false">üîà Hover Sound: Off</button>
            <button class="cta" aria-label="Open Vacancy showcase lightbox" data-lightbox="showcase-vacancy/preview.mp4">‚ñ∂Ô∏é Open Preview</button>
          </div>
        </div>
      </article>

      <article class="tile" aria-labelledby="xavier-title">
        <img class="poster" src="showcase-xavier/poster.jpg" alt="" />
        <video class="hovervid" muted preload="metadata" playsinline
               src="showcase-xavier/preview.mp4" data-sound="off"></video>
        <div class="meta">
          <h3 id="xavier-title">Xavier ‚Äî Study in Motion</h3>
          <p class="desc">Hover to preview. Toggle sound for audio.</p>
          <div class="plaque">
            <button class="sound" data-target=".hovervid" data-sound="off" aria-pressed="false">üîà Hover Sound: Off</button>
            <button class="cta" aria-label="Open Xavier showcase lightbox" data-lightbox="showcase-xavier/preview.mp4">‚ñ∂Ô∏é Open Preview</button>
          </div>
        </div>
      </article>

    </section>

    <footer>
      Copyright 2025 ‚Äî zdjimas and cjmurphy creators and authors
    </footer>
  </div>

  <script>
    // ===== Theme switcher (persist) =====
    (function(){
      const KEY='venue.theme';
      const saved = localStorage.getItem(KEY) || 'theme-default';
      document.documentElement.setAttribute('data-theme', saved);
      document.querySelectorAll('.theme [data-theme]').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const t = btn.getAttribute('data-theme');
          document.documentElement.setAttribute('data-theme', t);
          localStorage.setItem(KEY, t);
        });
      });
    })();

    // ===== Hover sound toggles for local MP4 showcase tiles =====
    document.addEventListener('click', (e)=>{
      const btn = e.target.closest('.sound');
      if(!btn) return;
      const tile = btn.closest('.tile');
      const vid = tile.querySelector(btn.getAttribute('data-target'));
      const on = btn.getAttribute('data-sound') === 'on';
      if(on){
        vid.muted = true; vid.setAttribute('data-sound','off'); btn.setAttribute('data-sound','off'); btn.textContent='üîà Hover Sound: Off'; btn.setAttribute('aria-pressed','false');
      }else{
        vid.muted = false; vid.setAttribute('data-sound','on'); btn.setAttribute('data-sound','on'); btn.textContent='üîä Hover Sound: On'; btn.setAttribute('aria-pressed','true');
      }
    });

    // Play hover video on hover (visual only if sound off)
    document.querySelectorAll('.tile .hovervid').forEach(v=>{
      v.addEventListener('mouseenter', ()=>{ v.play().catch(()=>{}); });
      v.addEventListener('mouseleave', ()=>{ v.pause(); });
    });

    // ===== Lightbox opener for non-room showcases =====
    document.addEventListener('click', (e)=>{
      const btn = e.target.closest('[data-lightbox]');
      if(!btn) return;
      e.preventDefault();
      const src = btn.getAttribute('data-lightbox');
      openLightbox(src);
    });

    function openLightbox(src){
      const wrap = document.createElement('div');
      wrap.className='room-intro-overlay';
      wrap.innerHTML = `
        <div class="intro-frame">
          <video class="intro-video" playsinline controls src="${src}"></video>
          <div class="intro-ui">
            <p class="intro-status">Preview ‚Äî press Esc to close</p>
            <button type="button" class="intro-skip">Close ‚úï</button>
          </div>
        </div>`;
      document.body.appendChild(wrap);
      const close = ()=> wrap.remove();
      wrap.querySelector('.intro-skip').addEventListener('click', close);
      wrap.addEventListener('keydown', e=>{ if(e.key==='Escape') close(); });
      wrap.tabIndex = -1; wrap.focus();
    }

    // ===== Pre-roll: play intro then navigate, with clearer loading message =====
    function buildIntroOverlay(message){
      const wrap = document.createElement('div');
      wrap.className = 'room-intro-overlay';
      wrap.setAttribute('role','dialog');
      wrap.setAttribute('aria-modal','true');
      wrap.innerHTML = `
        <div class="intro-frame">
          <video class="intro-video" playsinline preload="auto"></video>
          <div class="intro-ui">
            <p class="intro-status" aria-live="polite">${message}</p>
            <button type="button" class="intro-skip" aria-label="Skip transition and enter room">Skip ‚Üí</button>
          </div>
        </div>`;
      document.body.appendChild(wrap);
      return wrap;
    }

    function playIntroThenGo(introSrc, roomTarget){
      const overlay = buildIntroOverlay('Loading room transition video‚Ä¶ hit Skip if slow');
      const vid = overlay.querySelector('.intro-video');
      const skip = overlay.querySelector('.intro-skip');
      const status = overlay.querySelector('.intro-status');
      const go = ()=> location.href = roomTarget;

      let slowHintTimer = setTimeout(()=>{ status.textContent = 'Still loading‚Ä¶ you can hit Skip ‚Üí if it feels slow'; }, 2500);

      skip.addEventListener('click', go);
      overlay.addEventListener('keydown', e=>{ if(e.key==='Escape') go(); });

      vid.addEventListener('loadeddata', ()=>{ status.textContent = 'Starting‚Ä¶'; });
      vid.addEventListener('waiting', ()=>{ status.textContent = 'Buffering‚Ä¶ hit Skip ‚Üí if slow'; });
      vid.addEventListener('error', ()=>{ status.textContent = 'Trouble loading video. Skipping‚Ä¶'; go(); });
      vid.addEventListener('ended', go);

      vid.src = introSrc;
      vid.play().catch(()=>{ status.textContent = 'Autoplay blocked. Click Skip ‚Üí to enter the room'; });
    }

    // Bind plaque CTAs (generic handler)
    document.addEventListener('click', (e)=>{
      const btn = e.target.closest('.enter-room');
      if(!btn) return;
      e.preventDefault();
      const intro = btn.getAttribute('data-intro');
      const target = btn.getAttribute('data-target');
      if(intro) playIntroThenGo(intro, target);
      else if(target) location.href = target;
    });
  </script>
</body>
</html>

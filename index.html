 <!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Remote Video — Revid Test Modes</title>
<style>
  :root { --bg:#0b0c10; --card:#121317; --text:#e8eaed; --muted:#9aa0a6; --radius:18px; --shadow:0 10px 30px rgba(0,0,0,.35); }
  html,body { height:100% }
  body { margin:0; background:var(--bg); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; }
  .wrap { max-width:1000px; margin:auto; padding:28px 18px 80px }
  h1 { margin:0 0 8px; font-size:clamp(22px,2.6vw,34px); }
  .muted { color:#9aa0a6; font-size:14px; margin-bottom:12px }
  .row { display:flex; gap:10px; flex-wrap:wrap; margin:12px 0 18px }
  .btn { appearance:none; border:1px solid #2a3442; background:#1c2431; color:#e8eaed; padding:10px 14px; border-radius:10px; cursor:pointer }
  .btn[disabled]{opacity:.5; cursor:not-allowed}
  .card { background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden; }
  .area { position:relative; width:100%; aspect-ratio:16/9; background:#000; }
  video, iframe { position:absolute; inset:0; width:100%; height:100%; border:0; display:block; object-fit:cover; }
  .diag { color:#cbd5e1; font-size:13px; margin:10px 0 16px; white-space:pre-wrap }
</style>
</head>
<body>
  <div class="wrap">
    <h1>Remote Video — Revid Test Modes</h1>
    <div class="muted">
      Test three ways to load a remote video. Use your Revid link(s) below, then click a mode.
      <br>• Mode 1: <code>&lt;video src=…&gt;</code> (works only if host permits inline streaming)
      <br>• Mode 2: Blob fetch (requires CORS)
      <br>• Mode 3: <code>&lt;iframe&gt;</code> to a <b>player/embed</b> URL (not raw mp4)
    </div>

    <!-- PASTE YOUR URL(S) HERE -->
    <div class="muted">Raw MP4 URL:</div>
    <input id="mp4url" style="width:100%; padding:10px; border-radius:8px; border:1px solid #2a3442; background:#0f151e; color:#e8eaed"
           value="https://cdn.revid.ai/renders/b7HmVQsXrNEKjxU4Z99w/0x5OsebPTT09V2dSkpoa-1756260135614.mp4" />

    <div class="muted" style="margin-top:10px">Embed/Player URL (if Revid provides one):</div>
    <input id="embedurl" style="width:100%; padding:10px; border-radius:8px; border:1px solid #2a3442; background:#0f151e; color:#e8eaed"
           value="" placeholder="e.g., https://revid.ai/…/embed or share Player URL" />

    <div class="row">
      <button id="modeVideo" class="btn">Mode 1 — &lt;video src&gt;</button>
      <button id="modeBlob" class="btn">Mode 2 — Blob fetch</button>
      <button id="modeIframe" class="btn">Mode 3 — &lt;iframe&gt; embed</button>
    </div>

    <div id="diag" class="diag">Diagnostics will appear here.</div>

    <div class="card">
      <div class="area" id="area"></div>
    </div>

    <div class="muted" style="margin-top:14px">
      Tip: If Modes 1–2 fail, your host is blocking cross-origin playback. Use a real embed/player URL in Mode 3
      or move the video to a CDN with CORS (Cloudflare Stream / Bunny Stream / S3+CloudFront).
    </div>
  </div>

<script>
const area = document.getElementById('area');
const diag = document.getElementById('diag');
const mp4Input = document.getElementById('mp4url');
const embedInput = document.getElementById('embedurl');
const $ = (id) => document.getElementById(id);

function clearArea() { area.innerHTML = ''; diag.textContent = 'Diagnostics will appear here.'; }

$('modeVideo').addEventListener('click', () => {
  clearArea();
  const url = mp4Input.value.trim();
  const v = document.createElement('video');
  v.controls = true; v.playsInline = true; v.preload = 'metadata';
  // NOTE: do NOT set crossorigin unless the host supports it; some hosts reject CORS.
  v.src = url;
  v.addEventListener('error', () => diag.textContent = 'Mode 1: <video> failed to load the MP4 (host likely blocks inline streaming).');
  area.appendChild(v);
  diag.textContent = 'Mode 1: Inserted <video src>. Click Play.';
});

$('modeBlob').addEventListener('click', async () => {
  clearArea();
  const url = mp4Input.value.trim();
  const v = document.createElement('video');
  v.controls = true; v.playsInline = true; v.preload = 'metadata';
  area.appendChild(v);
  diag.textContent = 'Mode 2: fetching as Blob (requires CORS)…';

  try {
    const res = await fetch(url, { mode: 'cors' }); // if CORS blocked, this throws
    if (!res.ok) throw new Error('HTTP '+res.status);
    const blob = await res.blob();
    const obj = URL.createObjectURL(blob);
    v.src = obj;
    diag.textContent = 'Mode 2: Blob created. Click Play.';
  } catch (e) {
    diag.textContent = 'Mode 2 failed: CORS or network blocked the fetch. Use Mode 3 (embed) or a CDN with CORS.';
  }
});

$('modeIframe').addEventListener('click', () => {
  clearArea();
  const url = embedInput.value.trim() || mp4Input.value.trim();
  const f = document.createElement('iframe');
  f.src = url;
  f.allow = 'autoplay; fullscreen; picture-in-picture';
  area.appendChild(f);
  diag.textContent = 'Mode 3: Inserted <iframe>. If this navigates to a download, you need a proper player/embed URL from Revid.';
});

// Optional: small reachability hint
(async () => {
  try {
    const res = await fetch(mp4Input.value.trim(), { method:'HEAD' });
    diag.textContent = 'HEAD: '+ (res.ok ? 'OK' : ('HTTP '+res.status)) + ' • content-type: '+(res.headers.get('content-type')||'?');
  } catch {
    diag.textContent = 'HEAD failed (CORS). Try Mode 1 or Mode 2 to confirm, or use a proper embed URL in Mode 3.';
  }
})();
</script>
</body>
</html>
